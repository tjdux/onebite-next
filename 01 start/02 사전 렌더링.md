## 클라이언트 사이드 렌더링 (CSR)

- react.js 앱의 기본적인 렌더링 방식
- 클라이언트(브라우저)에서 직접 화면을 렌더링하는 방식
- 장점: 초기 접속 이후 페이지 이동이 매우 빠르고 쾌적
- 단점: 초기 접속 속도(FCP)가 느림
  - FCP (First Contentful Paint): 요청 시작 시점부터 컨텐츠가 화면에 처음 나타나는데 걸리는 시간 (요청 시작 ~ 컨텐츠 렌더링 (1 ~ 6))
    - 3sec 이상: 이탈률 32% 증가
    - 5sec 이상: 이탈률 90% 증가
    - 6sec 이상: 이탈률 106% 증가
    - 10sec 이상: 이탈률 123% 증가

```
1️⃣ 유저 => 브라우저를 통해 서버 접속 요청
2️⃣ 아무것도 없는 index.html를 브라우저에 응답
3️⃣ 브라우저는 빈 화면을 렌더링
4️⃣ 서버는 리액트 파일을 묶은 js bundle을 후속으로 브라우저에게 응답 (JS Bundle: 이 서비스에서 접근 가능한 모든 컴포넌트 코드 존재)
5️⃣ 브라우저는 JS(리액트앱) 직접 실행
6️⃣ 컨텐츠 렌더링
7️⃣ 페이지 이동 요청
8️⃣ 브라우저에서 js 실행 후 컨텐츠 렌더링 (다시 js bundle을 요청할 필요 없음)
```

<br/>

## NEXT의 사전 렌더링

- 브라우저의 요청에 사전에 렌더링이 완료된 HTML을 응답하는 렌더링 방식
- CSR의 단점을 효율적으로 해결하는 기술: 빠른 FCP 달성(react app의 단점 해소) + 빠른 페이지 이동(react app의 장점 승계)

```
1️⃣ 유저 => 브라우저를 통해 서버에 접속 요청
2️⃣ 서버에서 JS 실행 (렌더링) (리액트 컴포넌트를 HTML 파일로 변환)
3️⃣ 서버 => 브라우저 렌더링된 HTML 전송
4️⃣ 컨텐츠 렌더링 (아직 인터렉션 불가)
5️⃣ JS BUNDLE 전송
6️⃣ 브라우저는 JS를 실행하여 현재 화면의 HTML과 연결 -> 인터렉션 가능! (hydration)

- TTI (Time To Interactive): 상호작용이 가능해지기까지의 시간

7️⃣ 페이지 이동 요청
8️⃣ 브라우저에서 js 실행 (컴포넌트 교체)
9️⃣ 페이지 교체
```

- 🦜 사전 렌더링 = 서버 사이드 렌더링(SSR) + 정적 생성(SSG)
  - 사전 렌더링은 SSG, SSR 두 가지 방식으로 구분됨
  - SSG (Static Site Generation)
    - 빌드 타임에 HTML을 미리 생성해 둠 (getStaticProps)
    - 빌드 타임에 한 번만 서버에 HTML 생성
    - 요청 시 클라이언트에 HTML 즉시 전달
  - SSR (Server Side Rendering)
    - 매 요청마다 서버에서 HTML을 생성 (getServerSideProps)
    - 서버에서 매 요청 시마다 HTML 생성
